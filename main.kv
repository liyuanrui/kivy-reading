
<MyLayout>:
    searchkey:searchkey
    sourceweb:sourceweb
    novelname:novelname
    shownovellist:shownovellist
    novelid:novelid
    showchapterlist:showchapterlist
    startreadid:startreadid
    bodyid:bodyid
    nextbodyid:nextbodyid
    scrollid:scrollid
    scrollreadid:scrollreadid
    newreadid:newreadid
    orientation:'vertical'
    canvas.before:
        Rectangle:
            pos:self.pos
            size:self.size
            source:'55.png'

    ScreenManager:
        id:sm
        Screen:
            name:'index'
            #首页输入搜索信息,App更新提醒(酷安)
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'48dp'
                    Button:
                        text:'搜索类型: 小说名'
                        id:searchkey
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        on_release:dropdown.open(self)
                    DropDown:
                        id:dropdown
                        #on_parent:self.dismiss()
                        on_select:searchkey.text='搜索类型: {}'.format(args[1])
                        Button:
                            text:'作者名'
                            size_hint_y:None
                            height:'48dp'
                            background_normal:'3.png'
                            background_down:'2.png'
                            on_release:dropdown.select('作者名')
                        Button:
                            text:'小说名'
                            size_hint_y:None
                            height:'48dp'
                            background_normal:'3.png'
                            background_down:'2.png'
                            on_release:dropdown.select('小说名')
                    Button:
                        text:'源站: Zhetian'
                        id:sourceweb
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        on_release:dropdown2.open(self)
                    DropDown:
                        id:dropdown2
                        #on_parent:self.dismiss()
                        on_select:sourceweb.text='源站: {}'.format(args[1])
                        Button:
                            text:'Zhetian'
                            size_hint_y:None
                            height:'48dp'
                            background_normal:'3.png'
                            background_down:'2.png'
                            on_release:dropdown2.select('Zhetian')
                Label:
                    text:'小说名:' if '小说' in searchkey.text else '作者名:'
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                TextInput:
                    id:novelname
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                
                Label:
                    size_hint_y:None
                    height:'24dp'
                Button:
                    text:'查询'
                    size_hint_y:None
                    height:'81dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:
                        root.novellist()
                        sm.current='searchlist'
                Label:
            
        Screen:
            name:'searchlist'
            #搜索结果列表，在线看或下载
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                Button:
                    text:'返回首页'
                    id:btn2
                    size_hint_y:None
                    height:'48dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:sm.current='index'
                
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'小说编号:'
                TextInput:
                    id:novelid
                    text:'0'
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                Label:
                    size_hint_y:None
                    height:'24dp'
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'81dp'
                    Button:
                        size_hint_y:None
                        height:'81dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'下载'
                        on_release:sm.current='download'
                    Button:
                        size_hint_y:None
                        height:'81dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'在线看'
                        on_release:
                            root.readonline()
                            sm.current='readonline'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'查询结果:'
                    
                ScrollView:
                    Label:
                        id:shownovellist
                        size_hint_y:None
                        height:self.texture_size[1]
                        halign:'left'
                        valign:'top'
                        text_size:(self.width,None)
                        text:''
                Label:
                    size_hint_y:None
                    height:'9dp'

        Screen:
            name:'download'
            #下载页面
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                Button:
                    text:'返回上页'
                    size_hint_y:None
                    height:'48dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:sm.current='searchlist'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'下载路径:'
                TextInput:
                    id:downdir
                    text:'/sdcard/小说'
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'章节范围:'
                TextInput:
                    id:startchapter
                    text:'0,--'
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                Label:
                    size_hint_y:None
                    height:'24dp'
                Button:
                    text:'下载'
                    size_hint_y:None
                    height:'81dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'下载进度:'
                    
                ScrollView:
                    Label:
                        size_hint_y:None
                        height:self.texture_size[1]
                        halign:'left'
                        valign:'top'
                        text_size:(self.width,None)
                        text:'hello lr\n'*250
                Label:
                    size_hint_y:None
                    height:'9dp'

        Screen:
            name:'readonline'
            #在线看页面
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                Button:
                    text:'返回上页'
                    size_hint_y:None
                    height:'48dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:sm.current='searchlist'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'开始阅读章节编号:'
                TextInput:
                    id:startreadid
                    text:'0'
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                Label:
                    size_hint_y:None
                    height:'24dp'
                Button:
                    text:'阅读'
                    size_hint_y:None
                    height:'81dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:
                        root.startread()
                        sm.current='chapter'
                Label:
                    size_hint_y:None
                    height:'24dp'
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'48dp'
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'正序'
                        on_release:root.orderlist()
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'反序'
                        on_release:root.orderlist()
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'48dp'
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'上一页'
                        on_release:root.beforepage()
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'下一页'
                        on_release:root.nextpage()
                
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'章节列表:'
                    
                ScrollView:
                    id:scrollreadid
                    Label:
                        id:showchapterlist
                        size_hint_y:None
                        height:self.texture_size[1]
                        halign:'left'
                        valign:'top'
                        text_size:(self.width,None)
                        text:''
                Label:
                    size_hint_y:None
                    height:'9dp'
        Screen:
            name:'chapter'
            #正文页面
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'48dp'
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'返回'
                        on_release:sm.current='readonline'
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'加书签'
                        on_release:
                            root.writetable()
                            sm.current='table'
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'48dp'
                    Button:
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'上一章'
                        on_release:root.beforebody()
                    Button:
                        id:nextbodyid
                        size_hint_y:None
                        height:'48dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        text:'下一章'
                        on_release:root.nextbody()
                Label:
                    size_hint_y:None
                    height:'24dp'
                    
                ScrollView:
                    id:scrollid
                    Label:
      
                        id:bodyid
                        size_hint_y:None
                        height:self.texture_size[1]
                        halign:'left'
                        valign:'top'
                        text_size:(self.width,None)
                        text:''
                Label:
                    size_hint_y:None
                    height:'9dp'
            
        Screen:
            name:'table'
            #书架页面 
            BoxLayout:
                orientation:'vertical'
                padding:(36,36)
                Button:
                    text:'返回首页'
                    size_hint_y:None
                    height:'48dp'
                    background_normal:'3.png'
                    background_down:'2.png'
                    on_release:sm.current='index'
                
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'书签编号:'
                TextInput:
                    id:newreadid
                    text:'0'
                    size_hint_y:None
                    height:'48dp'
                    padding:(10,0.5*(self.height-self.line_height))
                    background_normal:'3.png'
                Label:
                    size_hint_y:None
                    height:'24dp'
                BoxLayout:
                    orientation:'horizontal'
                    size_hint_y:None
                    height:'81dp'
                    Button:
                        text:'删除'
                        size_hint_y:None
                        height:'81dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        on_release:root.deletetable()
                    Button:
                        text:'阅读'
                        size_hint_y:None
                        height:'81dp'
                        background_normal:'3.png'
                        background_down:'2.png'
                        on_release:
                            root.readyread()
                            sm.current='chapter'
                Label:
                    size_hint_y:None
                    height:'48dp'
                    text_size:(self.width,None)
                    halign:'left'
                    valign:'top'
                    text:'书签列表:'
                    
                ScrollView:
                    Label:
                        id:tablelist
                        size_hint_y:None
                        height:self.texture_size[1]
                        halign:'left'
                        valign:'top'
                        text_size:(self.width,None)
                        text:'hello lr\n'*250
                Label:
                    size_hint_y:None
                    height:'9dp'
            
        Screen:
            name:'source'
            #源站匹配申请页面'
            #阅读颜色




            